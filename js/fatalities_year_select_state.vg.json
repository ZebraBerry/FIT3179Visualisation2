{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": {
    "text": "Fatalities",
    "anchor": "middle",
    "fontSize": 20
  },
  
  "data": {"url": "https://raw.githubusercontent.com/ssmi0026/FIT3179Visualisation2/main/data/YearStateFatalitiesFatalCrashes.csv"
  }
  ,
  "hconcat": [
    { "mark": "bar", "width":250,"height":300,
      "transform": [
        {"filter": {"param": "pts"}},
        {
          "calculate": "if(datum.State === 'NSW', 0, if(datum.State === 'Vic', 1, if(datum.State === 'Qld', 2, if(datum.State === 'WA', 3, if(datum.State === 'SA', 4, if(datum.State === 'NT', 5, if(datum.State === 'Tas', 6, if(datum.State === 'ACT', 7, 8))))))))",
        "as": "stateOrder"
        }
      ],
      "encoding": {
        "x": {
          "timeUnit": "year",
          "field": "Year",
          "title": "Year",
          "type": "ordinal"
        },
        "y": {"field": "Fatalities", "type": "quantitative", "aggregate": "sum", "title": "Fatalities","axis": {"grid": true}},
        "color": {
          "field": "State",
          "type": "nominal",
          "scale": {
            "scheme": "category20",
            "domain": [
              "ACT",
          "NSW",
          "NT",
          "Qld",
          "SA",
          "Tas",
          "Vic",
          "WA"]
          
          }
        },
        "order": {"field": "stateOrder"},
        "opacity": {
          "condition": {"param": "pts", "value": 1},
          "value": 0.05
        },
        "tooltip": [
          {"field": "State"},
      {"field": "Year", "type": "nominal", "timeUnit": "year", "title": "Year"},
      {"field": "Fatalities", "aggregate":"sum", "title": "Fatalities"}
      ]
      }
    },
    {
      "params": [{
        "name": "pts",
        "select": {"type": "point", "encodings": ["y"]}
      }],
      "width": 35,
      "height": 200,
      "mark": {"type": "bar"},
      "encoding": {
        "y": {
          "type": "ordinal", 
          "field": "State",
          "title": "State",
          "scale": {
            "scheme": "category20",
            "domain": [
              "ACT",
              "NSW",
              "NT",
              "Qld",
              "SA",
              "Tas",
              "Vic",
              "WA"
            ]
          }
        },
        "color": {"field": "State","type": "nominal"},
        "opacity": {
          "condition": {"param": "pts", "value": 1},
          "value": 0
        }
      }
    }
  ],
  "config": {
    "legend": {"disable": true},
    "axisYBand": {"titleAngle": 0, "titleX": -50, "titleY": -10, "titleAlign": "left"}

  },
  "background":"antiquewhite"
}
